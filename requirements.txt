# ============================================
# PIPELINE: Image Generation & Refinement
# ============================================
# Architecture:
#   1. Image de référence / Génération initiale
#   2. ControlNet (Depth / Canny / OpenPose)
#   3. Diffusion SDXL (structure verrouillée)
#   4. SAM (segmentation précise)
#   5. Inpainting / Img2Img local
#   6. LoRA ciblés + Refiner
#   7. Upscale final
# ============================================

# ----------------
# PyTorch (CUDA 12.x)
# ----------------
torch>=2.2.0
torchvision>=0.17.0
torchaudio>=2.2.0

# ----------------
# Diffusers & Hugging Face (SDXL, ControlNet, Inpainting, LoRA)
# ----------------
diffusers>=0.27.0
transformers>=4.40.0
accelerate>=0.28.0
huggingface_hub>=0.22.0
safetensors>=0.4.2
peft>=0.10.0  # LoRA support

# ----------------
# ControlNet Preprocessors
# ----------------
controlnet-aux>=0.0.8  # Depth, Canny, OpenPose, Lineart, etc.

# ----------------
# SAM - Segment Anything Model
# ----------------
segment-anything>=1.0
# Pour SAM 2 (optionnel, installer manuellement):
# pip install git+https://github.com/facebookresearch/segment-anything-2.git

# Grounded-SAM (segmentation par texte)
groundingdino-py>=0.4.0

# ----------------
# Tokenizers
# ----------------
sentencepiece>=0.2.0
protobuf>=4.25.0

# ----------------
# Image Processing
# ----------------
Pillow>=10.2.0
numpy>=1.26.0
opencv-python>=4.9.0
scipy>=1.12.0
scikit-image>=0.22.0

# ----------------
# IP-Adapter (transfert de style avancé)
# ----------------
ip-adapter>=0.1.0

# ----------------
# Cloud Upload
# ----------------
cloudinary>=1.39.0

# ----------------
# GPU Optimizations
# ----------------
xformers>=0.0.25
triton>=2.2.0  # Windows: triton-windows

# ----------------
# Upscaling
# ----------------
realesrgan>=0.3.0
basicsr>=1.4.2

# ----------------
# Face Restoration (optionnel)
# ----------------
gfpgan>=1.3.8
# codeformer  # Installer manuellement si besoin

# ----------------
# Utilities
# ----------------
einops>=0.7.0
omegaconf>=2.3.0
tqdm>=4.66.0
matplotlib>=3.8.0
gradio>=4.20.0  # Interface web optionnelle
